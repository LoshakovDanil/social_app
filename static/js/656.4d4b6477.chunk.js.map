{"version":3,"file":"static/js/656.4d4b6477.chunk.js","mappings":"2OASaA,EAA4B,WACvC,IAAMC,GAAUC,EAAAA,EAAAA,QAA2B,MAErCC,GAAWC,EAAAA,EAAAA,IAAe,SAAAC,GAAK,OAAIA,EAAMC,KAAKH,QAAQ,IAQ5D,OANAI,EAAAA,EAAAA,YAAU,WACJN,EAAQO,UACVP,EAAQO,QAAQC,UAAYR,EAAQO,QAAQE,aAEhD,GAAG,CAACP,KAGF,gBAAKQ,IAAKV,EAASW,MAAO,CAAEC,UAAW,QAASC,UAAW,QAAS,UAClE,SAAC,IAAI,CACHC,WAAW,aACXC,WAAYb,EACZc,WAAY,SAACC,EAAoBC,GAAK,OACpC,SAAC,SAAS,WACR,SAAC,cAAc,CACbC,QAAQ,SAAC,IAAM,CAACC,IAAG,gEAA2DF,KAC9EG,MAAOJ,EAAKK,KACZC,UAAW,OAEH,KAKtB,ECpCA,EAAkC,kCAAlC,EAAqF,iCAArF,EAAsI,gCC8DtI,EApDiB,WACf,IAAMC,GAASrB,EAAAA,EAAAA,IAAe,SAAAC,GAAK,OAAIA,EAAMC,KAAKmB,MAAM,IAElDC,GAAWC,EAAAA,EAAAA,MACjBpB,EAAAA,EAAAA,YAAU,WAER,OADAmB,GAASE,EAAAA,EAAAA,OACF,WACLF,GAASG,EAAAA,EAAAA,MACX,CACF,GAAG,IAeH,OACE,4BACE,0BACE,SAAC,EAAe,OAElB,0BACE,SAAC,KAAM,CAACC,oBAAkB,EAACC,cAAe,CAAEC,KAAM,IAAMC,SAnB/C,SACbC,EAAyB,GAErB,IADFC,EAAa,EAAbA,cAAeC,EAAS,EAATA,UAGjB,GADAD,GAAc,GACVD,EAAOF,MAA+B,KAAvBE,EAAOF,KAAKK,OAAe,CAC5C,IAAMC,EAAeJ,EAAOF,KAAKO,QAAQ,OAAQ,KAAKF,OACtDG,QAAQC,IAAI,WAAaH,GACzBZ,GAASgB,EAAAA,EAAAA,IAAYJ,GACvB,CACAF,GACF,EAQ+E,SACtE,kBACC,UAAC,KAAI,YACH,SAAC,KAAK,CAACO,KAAK,OAAOC,KAAK,UACxB,SAACC,EAAA,EAAM,CAACF,KAAK,SAASG,SAAqB,YAAXrB,EAAqB,4BAGhD,OAIb,yBACc,UAAXA,GACC,gBAAKD,UAAS,UAAKuB,EAAiB,YAAIA,GAAkB,2BAE1D,gBAAKvB,UAAS,UAAKuB,EAAiB,YAAIA,GAAmB,gCAKrE,C","sources":["components/Chat/ChatMessagePage.tsx","webpack://react_app/./src/components/Chat/ChatPage.module.css?bcb2","components/Chat/ChatPage.tsx"],"sourcesContent":["import { useEffect, useRef } from 'react'\r\n\r\nimport { Avatar, List } from 'antd'\r\n\r\nimport { MessagesData } from '../../types/types'\r\nimport { useAppSelector } from '../../hook/hook'\r\n\r\nimport './ChatMessagePage.scss'\r\n\r\nexport const ChatMessagePage: React.FC = () => {\r\n  const listRef = useRef<HTMLHeadingElement>(null)\r\n\r\n  const messages = useAppSelector(state => state.chat.messages)\r\n\r\n  useEffect(() => {\r\n    if (listRef.current) {\r\n      listRef.current.scrollTop = listRef.current.scrollHeight\r\n    }\r\n  }, [messages])\r\n\r\n  return (\r\n    <div ref={listRef} style={{ maxHeight: '700px', overflowY: 'auto' }}>\r\n      <List\r\n        itemLayout=\"horizontal\"\r\n        dataSource={messages}\r\n        renderItem={(item: MessagesData, index) => (\r\n          <List.Item>\r\n            <List.Item.Meta\r\n              avatar={<Avatar src={`https://xsgames.co/randomusers/avatar.php?g=pixel&key=${index}`} />}\r\n              title={item.text}\r\n              className={'j'}\r\n            />\r\n          </List.Item>\r\n        )}\r\n      />\r\n    </div>\r\n  )\r\n}\r\n","// extracted by mini-css-extract-plugin\nexport default {\"statusContainer\":\"ChatPage_statusContainer__kzhSN\",\"offlineMessage\":\"ChatPage_offlineMessage__HUVdT\",\"onlineMessage\":\"ChatPage_onlineMessage__kAuHX\",\"text\":\"ChatPage_text__-CufC\",\"ant-list-item-meta-content\":\"ChatPage_ant-list-item-meta-content__0IfP9\",\"ant-list-item-meta-title\":\"ChatPage_ant-list-item-meta-title__MWUqu\"};","import { useEffect } from 'react'\r\nimport { Field, Form, Formik } from 'formik'\r\n\r\nimport { useAppDispatch, useAppSelector } from '../../hook/hook'\r\nimport { sendMessage, startMessagesListening, stopMessagesListening } from '../../redux-toolkit/chatSlice'\r\nimport { Button } from '../common/Button/Button'\r\n\r\nimport { ChatMessagePage } from './ChatMessagePage'\r\n\r\nimport s from './ChatPage.module.css'\r\n\r\nconst ChatPage = () => {\r\n  const status = useAppSelector(state => state.chat.status)\r\n\r\n  const dispatch = useAppDispatch()\r\n  useEffect(() => {\r\n    dispatch(startMessagesListening())\r\n    return () => {\r\n      dispatch(stopMessagesListening())\r\n    }\r\n  }, [])\r\n\r\n  const submit = (\r\n    values: { term: string },\r\n    { setSubmitting, resetForm }: { setSubmitting: (isSubmitting: boolean) => void; resetForm: () => void },\r\n  ) => {\r\n    setSubmitting(false)\r\n    if (values.term && values.term.trim() !== '') {\r\n      const cleanMessage = values.term.replace(/\\s+/g, ' ').trim()\r\n      console.log('message ' + cleanMessage)\r\n      dispatch(sendMessage(cleanMessage))\r\n    }\r\n    resetForm()\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div>\r\n        <ChatMessagePage />\r\n      </div>\r\n      <div>\r\n        <Formik enableReinitialize initialValues={{ term: '' }} onSubmit={submit}>\r\n          {() => (\r\n            <Form>\r\n              <Field type=\"text\" name=\"term\" />\r\n              <Button type=\"submit\" disabled={status === 'pending'}>\r\n                Send Message\r\n              </Button>\r\n            </Form>\r\n          )}\r\n        </Formik>\r\n      </div>\r\n      <div>\r\n        {status === 'ready' ? (\r\n          <div className={`${s.statusContainer} ${s.onlineMessage}`}>Server is on</div>\r\n        ) : (\r\n          <div className={`${s.statusContainer} ${s.offlineMessage}`}>Server is down</div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ChatPage\r\n"],"names":["ChatMessagePage","listRef","useRef","messages","useAppSelector","state","chat","useEffect","current","scrollTop","scrollHeight","ref","style","maxHeight","overflowY","itemLayout","dataSource","renderItem","item","index","avatar","src","title","text","className","status","dispatch","useAppDispatch","startMessagesListening","stopMessagesListening","enableReinitialize","initialValues","term","onSubmit","values","setSubmitting","resetForm","trim","cleanMessage","replace","console","log","sendMessage","type","name","Button","disabled","s"],"sourceRoot":""}